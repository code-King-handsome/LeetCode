plugins {
    id 'java'
    id 'jacoco'
    id 'org.sonarqube' version '2.8'
}

group 'org.example'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

jacocoTestReport {
  reports {
    html.enabled true
  }
  afterEvaluate {
    classDirectories = files(classDirectories.files.collect {
      fileTree(dir: it, exclude: [
              '**/*Q202**',
              '**/*Q830**'
      ])
    })
  }
}
check.dependsOn jacocoTestReport
test{
  jacoco {
    excludes = ['*Q202*','*Q830*']
  }
}

//sonarqube {
//  properties{
//    property "sonar.jacoco.reportPaths", "$buildDir\\jacoco\\test.exec"
//  }
//}